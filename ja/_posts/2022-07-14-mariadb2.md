---
# 속성은 대쉬 내부에 작성하세요

# 영문으로 같은 내용 작성 시 id 같아야 함
lng_pair: id_kakao_mariadb2
# 영문으로 작성하는 경우 영문제목
title: (MariaDB)DB모델링 실습

# 저자 설정(생략 가능)
#author: initializer

# 카테고리와 태그 설정
category: 카카오클라우드스쿨
tags: [Database, MariaDB, Linux]

# 섬네일 이미지
img: "https://avatars.githubusercontent.com/u/5877084?s=280&v=4"

# 댓글 비활성화 여부
comments_disable: false

# 작성 날짜
date: 2022-07-14 18:48:51 +0900

# image_lazy_loader_posts = false 혹은 image_viewer_posts = false인 경우에만 사용하세요
#image_viewer_on: true
#image_lazy_loader_on: true

# 블로그내 검색 혹은 검색 엔진 검색에서 예외할건가
#on_site_search_exclude: true
#search_engine_exclude: true

# to disable this page, simply set published: false or delete this file
#published: false
---

<!-- outline-start -->

[카카오 클라우드 스쿨] DBForge Studio를 통한 DB 모델링 실습

<!-- outline-end -->


# MariaDB (2) - DB 모델링 실습

<br>

## DBForge Studio를 통한 DB 모델링

<br>

* DBForge Studio를 통해 DB를 모델링 할 수 있다
  1. 다음과 같이 생성하면 ![img_1.png](img_1.png)
  2. 다음과 같이 다이어그램 그릴 수 있다 ![img_2.png](img_2.png)

<br>

* 테스트해 보기
  1. 데이터베이스 생성
     * ![img_11.png](img_11.png)
  2. 모눈종이에 테이블 생성
     * ![img_12.png](img_12.png)
  3. 다음처럼 테이블 구성
     * ![img_4.png](img_4.png)
  4. 제약 조건 확인가능
     * ![img_5.png](img_5.png)
  5. 테이블 두 개를 다음과 같이 구성
     * ![img_6.png](img_6.png)
  6. 외래키 지정, 테이블 간의 관계가 설정됨
     * ![img_7.png](img_7.png)

<br>

* heidi에서 행 삽입해보자
  * (buytable은 usertable에 값이 있어야 작성 가능)
  * usertbl 행 삽입 ![img_8.png](img_8.png)
  * buytbl 행 삽입  ![img_9.png](img_9.png)
  * 리눅스에서 결과 확인 ![img_10.png](img_10.png)

<br>
<hr>

## 클라우드 공간에서 간단한 인스턴스 만들기

* 대충 이런 모양에 대해 공부해 볼 것임
  * ![img](https://www.researchgate.net/profile/Przemyslaw-Pawluk/publication/228097896/figure/fig1/AS:393656189112334@1470866357959/The-as-implemented-database-schema.png)

<br>

* ![img_18.png](img_18.png)

<br>

* 사용자 테이블
  * id(사용자별로 동일해서는 안됨)
  * password
  * name
  * addr
  * mobile number

<br>

* 호스트 테이블(인스턴스가 배치되는 물리 서버)
  * hostname (ex: seoul_zone_A_rack13_001와 같이 작명)
  * hostip
  * cpu
  * ramsize

<br>

* 인스턴스
  * instancename(중복되면 안됨) - PK
  * id(사용자 테이블의 id) - 사용자 Table로부터 FK
  * hostname (인스턴스가 배치되는 물리서버의 이름)
  * flavor (ex: m1.small, m1.micro ..)
  * instanceip (사설 IP)

<br>

* 다이어그램 그림
  * ![img_19.png](img_19.png)

<br>
<hr>


## DBForge Studio를 사용하여 실습(다이어그램)
1. instance
   * ![img_13.png](img_13.png)
2. user
   * ![img_14.png](img_14.png)
3. host
   * ![img_15.png](img_15.png)
4. 제약 조건 설정
   * ![img_16.png](img_16.png)

<br>
<hr>

## 실습명
* 사전에 만들어 둔 DB 복붙

```sql
[샘플 DB]
http://dw.hanbit.co.kr/mariadb/10.3/employees.zip


[실습용 DB]
DROP DATABASE IF EXISTS sqlDB;
CREATE DATABASE sqlDB;

USE sqlDB;
CREATE TABLE userTbl
( userID  	CHAR(8) NOT NULL PRIMARY KEY,
  name    	VARCHAR(10) NOT NULL,
  birthYear   INT NOT NULL,
  addr	  CHAR(2) NOT NULL,
  mobile1	 CHAR(3),
  mobile2	 CHAR(8),
  height    SMALLINT,
  mDate    DATE
);
CREATE TABLE buyTbl
(  num INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
   userID  	CHAR(8) NOT NULL,
   prodName 	CHAR(6) NOT NULL,
   groupName 	CHAR(4),
   price     	INT  NOT NULL,
   amount    	SMALLINT  NOT NULL,
   FOREIGN KEY (userID) REFERENCES userTbl(userID)
);

INSERT INTO userTbl VALUES('LSG', N'이승기', 1987, N'서울', '011', '11111111', 182, '2008-8-8');
INSERT INTO userTbl VALUES('KBS', N'김범수', 1979, N'경남', '011', '22222222', 173, '2012-4-4');
INSERT INTO userTbl VALUES('KKH', N'김경호', 1971, N'전남', '019', '33333333', 177, '2007-7-7');
INSERT INTO userTbl VALUES('JYP', N'조용필', 1950, N'경기', '011', '44444444', 166, '2009-4-4');
INSERT INTO userTbl VALUES('SSK', N'성시경', 1979, N'서울', NULL  , NULL      , 186, '2013-12-12');
INSERT INTO userTbl VALUES('LJB', N'임재범', 1963, N'서울', '016', '66666666', 182, '2009-9-9');
INSERT INTO userTbl VALUES('YJS', N'윤종신', 1969, N'경남', NULL  , NULL      , 170, '2005-5-5');
INSERT INTO userTbl VALUES('EJW', N'은지원', 1972, N'경북', '011', '88888888', 174, '2014-3-3');
INSERT INTO userTbl VALUES('JKW', N'조관우', 1965, N'경기', '018', '99999999', 172, '2010-10-10');
INSERT INTO userTbl VALUES('BBK', N'바비킴', 1973, N'서울', '010', '00000000', 176, '2013-5-5');
INSERT INTO buyTbl VALUES(NULL, 'KBS', N'운동화', NULL   , 30,   2);
INSERT INTO buyTbl VALUES(NULL, 'KBS', N'노트북', N'전자', 1000, 1);
INSERT INTO buyTbl VALUES(NULL, 'JYP', N'모니터', N'전자', 200,  1);
INSERT INTO buyTbl VALUES(NULL, 'BBK', N'모니터', N'전자', 200,  5);
INSERT INTO buyTbl VALUES(NULL, 'KBS', N'청바지', N'의류', 50,   3);
INSERT INTO buyTbl VALUES(NULL, 'BBK', N'메모리', N'전자', 80,  10);
INSERT INTO buyTbl VALUES(NULL, 'SSK', N'책'    , N'서적', 15,   5);
INSERT INTO buyTbl VALUES(NULL, 'EJW', N'책'    , N'서적', 15,   2);
INSERT INTO buyTbl VALUES(NULL, 'EJW', N'청바지', N'의류', 50,   1);
INSERT INTO buyTbl VALUES(NULL, 'BBK', N'운동화', NULL   , 30,   2);
INSERT INTO buyTbl VALUES(NULL, 'EJW', N'책'    , N'서적', 15,   1);
INSERT INTO buyTbl VALUES(NULL, 'BBK', N'운동화', NULL   , 30,   2);

SELECT * FROM userTbl;
```

* ![img_17.png](img_17.png)

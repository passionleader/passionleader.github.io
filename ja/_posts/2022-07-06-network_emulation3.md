---
# 속성은 대쉬 내부에 작성하세요

# 영문으로 같은 내용 작성 시 id 같아야 함
lng_pair: id_kakao_emulation3
# 영문으로 작성하는 경우 영문제목
title: 네트워크 애뮬레이션 실습3 - 본사와 지사의 라우터 설정

# 저자 설정(생략 가능)
#author: initializer

# 카테고리와 태그 설정
category: 카카오클라우드스쿨
tags: [network, linux, GNS3, Wireshark, router]

# 섬네일 이미지
img: "data:image/png;base64,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"

# 댓글 비활성화 여부
comments_disable: false

# 작성 날짜
date: 2022-07-06 12:03:22 +0900

# image_lazy_loader_posts = false 혹은 image_viewer_posts = false인 경우에만 사용하세요
#image_viewer_on: true
#image_lazy_loader_on: true

# 블로그내 검색 혹은 검색 엔진 검색에서 예외할건가
#on_site_search_exclude: true
#search_engine_exclude: true

# to disable this page, simply set published: false or delete this file
#published: false
---

<!-- outline-start -->

[카카오 클라우드 스쿨] GNS3 및 Wireshark를 통한 네트워크 에뮬레이션

<!-- outline-end -->

# 네트워크 애뮬레이션 실습3 - 본사와 지사의 라우터 설정
* 오늘의 실습: 본사, 지사를 구성하며 회사 네트워크를 구성해 보자
  * 지사에서 본사 인터넷에 접속해 보자
  * ![img_127.png](img_127.png)

<br>
<hr>

## 1. 네트워크 구축하기
1. GNS 실행 <br> <br>
2. 다음과 같이 구성한다
   * 오늘은 linux를 쓰지 않고 VPC를 사용할 것임
   * ![img_121.png](img_121.png) <br> <br>
3. 본사의 라우터 slot에 랜카드를 추가한다
   * ![img_122.png](img_122.png) <br> <br>
4. cloud에 인터넷을 연결한다
   * ![img_123.png](img_123.png) <br> <br>
5. 다음과 같이 연결한다
   * ![img_124.png](img_124.png) <br> <br>
6. 전체 실행하지 말고, HQ 라우터, BR 라우터만 우클릭으로 실행시킨다
   * ![img_125.png](img_125.png) <br> <br>
7. (GNS3가 CPU 자원을 너무 많이 잡아먹는다면 라우터에서 다음을 수행한다)
   * ![img_126.png](img_126.png) <br> <br>

<br>
<hr>

## 2. 라우터 설정하기
1. 인터넷을 연결하려면 NAT도 구성해야 한다
   * ![img_128.png](img_128.png) <br> <br>
2. 본사(NAT-HQ)의 지사연결부분 구성하기(뒷단으로 나가는 부분)
   * ![img_133.png](img_133.png) <br> <br>
3. 본사의 내부망 구성하기
   * ![img_134.png](img_134.png) <br> <br>
4. 본사 라우터 현황 확인
   * ![img_135.png](img_135.png) <br> <br>
5. 지사의 본사연결부분 구성하기(본사의 뒷단으로부터 받음)
   * ![img_136.png](img_136.png) <br> <br>
6. 지사 내부망 구성하기
   * ![img_137.png](img_137.png) <br> <br>

<br>
<hr>


## 3. 라우터 인바운드 설정(들어오는 부분)
1. 두 개의 라우터는 10번대 주소를 서로 알고 있다.
   * 10.10.10.1 에서 10.10.10.2에서 핑을 보낼 수 있다
   * ![img_138.png](img_138.png)
   * ![img_139.png](img_139.png) <br> <br>
2. 하지만 본사의 100번대에서 지사의 10번대로 보낼 수 있을까?
   * Ping은 가지만, 지사의 Router는 어디로 반환할 지 모르게 된다
   * 따라서 핑은 가지만, 오지는 않는다
   * ![img_140.png](img_140.png)
   * ![img_141.png](img_141.png) <br> <br>
3. 그렇다면 본사의 10번대에서 지사의 200번대로 보낼 수 있을까?
   * 이번에는 Ping도 안 간다 (어디있는지 모른다)
   * ![img_142.png](img_142.png)
   * ![img_144.png](img_144.png) <br> <br>
4. 따라서 본사의 라우팅 테이블에 추가하면
   * 라우팅 테이블 추가, 10.2 뒤에 200.0이 있다는 내용
   * ![img_145.png](img_145.png) <br> <br>
5. 지사에 라우팅 테이블에도 추가한다
   * 라우팅 테이블 추가. 10.1 뒤애 100.0이 있다
   * ![img_147.png](img_147.png) <br> <br>
6. 이제 아주 잘 되는 모습이 확인된다
   * 기존 <br> ![img_146.png](img_146.png)
   * 수정 <br> ![img_149.png](img_149.png) <br> <br>

* **지금까지 한 것은 단방향이었음!**, 아직 인터넷에 접속할 수는 없다

<br>
<hr>


## 4. 라우터 아웃바운드 설정하기 (나가는 부분)
1. IP Route 확인하기
  * ![img_150.png](img_150.png)
  * 10.10.10.x IP는 fa0/1로 가는 것을 확인할 수 있음 <br> <br>
2. 인터넷으로 나가기 위한 디폴트 라우트 설정
  * ![img_159.png](img_159.png)
  * ![img_157.png](img_157.png)
  * 추가설명(예시)
    * ip route 1.1.1.0 255.255.255.0 2.2.2.2
      * 0000 0001. 0000 0001. 0000 0001. 0000 0000
      * 1111 1111. 1111 1111. 1111 1111. 0000 0000
      * 모든 IP 주소를 2.2.2.2로 보내겠다 (디폴트 포트 설정)
        ip route 1.1.0.0 255.255.0.0 2.2.2.2   1.1.0.0 ~ 1.1.255.255
        ip route 1.0.0.0 255.  0.0.0 2.2.2.2   1.0.0.0 ~ 1.255.255.255.255
        ip route 0.0.0.0   0.  0.0.0 2.2.2.2   0.0.0.0 ~ 255.255.255.255  : default route
    * 라우터와 같이 패킷처리 장비: 목적지 주소에 부합하는 네트워크 경로가 2개 이상인 경우, 더욱 자세한 주소를 찾아간다 -> longestmatch rules <br> <br>

2. fa0/0에 나가는 연결 설정해 주기
   * ![img_151.png](img_151.png) <br> <br>

3. 구글에 핑 보냄
   * ![img_160.png](img_160.png) <br> <br>

4. pc에 DNS서버인 8.8.8.8 추가 (지사에도 동일하게 적용)
   * ![img_152.png](img_152.png) <br> <br>

5. 글자를 DNS 서버(8.8.8.8)에게 물어봐서 접속하게끔 한다 (지사에도 동일하게 적용)
   * ![img_153.png](img_153.png) <br> <br>

6. DNS 네임으로 핑 보낼 수 있음
   * ![img_155.png](img_155.png)
   * 이제 HQ에서는 인터넷에 접속할 수 있지만
   * 아직 BR에서는 인터넷에 접속할 수 없다 -> 회사 내부 사설 IP들을 매핑시켜야 함 <br> <br>

7. 사설 주소와 공인 주소를 매핑하기
   * any:0.0.0.0 줄임말임, 즉 내부에 있는 모든 사설 IP를 묶어낸다
   * ![img_161.png](img_161.png) <br> <br>

8. 다음과 같이 구성하여 지사와 본사의 인터넷 연결하기
   * ![img_162.png](img_162.png) <br> <br>

9. PC를 실행하여 내부망 테스트
   * ![img_164.png](img_164.png)
   * ![img_165.png](img_165.png) <br> <br>

10. PC에 DNS 주소 이용하도록 설정
    * ![img_166.png](img_166.png) <br> <br>

11. google에 핑 해보기
    * ![img_168.png](img_168.png) <br> <br>

<br>
<hr>


## 5. 연습문제
* 우리 회사는 웹서비스 제공을 위해 공인주소를 구매하였다.
* 211.183.3.0/24를 사용할 수 있고, 라우터의 HQ의 fa0/0에는 211.183.3.99를 할당한다.
* ISP 주소는 211.183.3.2로 고정되어 있다. 나머지 주소는 내부에서 자유롭게 사용할 수 있다
<br>

* 이 중, 211.183.3.100은 본사와 지사에 있는 PC들이 동적 PAT를 통하여 인터넷과 연결이 가능하도록 할 것이고,
* 211.183.3.101은 본사 내부에 있는 웹서버 10.10.100.100과 1:1로 정적 NAT를 구성하여 웹서비스를 구성하여 웹서비스를 제공할 계획이다
<br>

* 요약: ![img_169.png](img_169.png)
<br>

1. 클라우드(인터넷) 구성 다음과 같이 변경한다
   * ![img_170.png](img_170.png) <br><br>
2. HQ의 fa0/0 설정하기
   * ![img_185.png](img_185.png) <br><br>
3. HQ의 아웃바운드 정적라우팅 재설정하기(기존의 ISP 지우고 새 ISP로 변경)
   * ![img_184.png](img_184.png)
   * ![img_183.png](img_183.png)
   * ![img_182.png](img_182.png) <br><br>
4. HQ의 NAT 재설정하기(지우고 다시생성), 구글 핑하면 잘될것임
   * ![img_178.png](img_178.png)
   * ![img_177.png](img_177.png)
   * ![img_176.png](img_176.png) <br><br>
5. NAT 풀 생성, 범위 지정
   * ![img_186.png](img_186.png) <br><br>
6. NAT 정적매핑
   * ![img_187.png](img_187.png) <br><br>
7. ip nat inside source list 1 pool PRI overload
   * 아까 만든 PRI라는 pool을 사용
   * overload: 여러 개의 사설 ip가 하나의 ip를 공유할 것임 <br><br>
8. 라우터 하단 가상 PC에서 연결 시도
   * PC1> ping 8.8.8.8
   * PC2> ping 8.8.8.8  <br><br>




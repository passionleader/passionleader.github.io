---
# 속성은 대쉬 내부에 작성하세요

# 영문으로 같은 내용 작성 시 id 같아야 함
lng_pair: id_kakao_virtualization
# 영문으로 작성하는 경우 영문제목
title: wireshark를 사용해 패킷 캡쳐해보기 (1)

# 저자 설정(생략 가능)
#author: initializer

# 카테고리와 태그 설정
category: 카카오클라우드스쿨
tags: [virtualization, linux]

# 섬네일 이미지
img: "data:image/png;base64,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"

# 댓글 비활성화 여부
comments_disable: false

# 작성 날짜
date: 2022-07-04 17:03:22 +0900

# image_lazy_loader_posts = false 혹은 image_viewer_posts = false인 경우에만 사용하세요
#image_viewer_on: true
#image_lazy_loader_on: true

# 블로그내 검색 혹은 검색 엔진 검색에서 예외할건가
#on_site_search_exclude: true
#search_engine_exclude: true

# to disable this page, simply set published: false or delete this file
#published: false
---

<!-- outline-start -->

[카카오 클라우드 스쿨] wireshark와 GNS3을 이용하여 패킷을 캡쳐하여 보자! (1)

<!-- outline-end -->


# 패킷 캡쳐

* 서버에 원격접속하는 방법
   1. using GUI: vnc, spice, pcoip..
   2. using CLI: telnet, ssh (일반 PW 로그인뿐만 아니라, key-pair를 이용한 인증도 제공한다)

<br>
<hr>

## 환경 구성

1 . wireshark 설치 <br><br>

2 . GNS3 설치 <br>
  * 시뮬레이터가 아닌 애뮬레이터라서 서버에 연결해서 사용할수도 있다
  * 아래와 같이 생긴 라우터 등을 모의로 구성해 볼 수 있다 <br> ![img_51](https://user-images.githubusercontent.com/104918800/177148542-3981e300-97d4-4a04-87ba-b6fdf0510be9.png)
  * ![img_47](https://user-images.githubusercontent.com/104918800/177148532-18e389ff-0f1d-4f81-9f79-da5269f9ad74.png) <br><br>

3 . 설정 <br>
  * 파일 삽입
     * ![img_48](https://user-images.githubusercontent.com/104918800/177148535-e6444b18-c6e5-45d2-98f1-feac46846c7b.png)
  * general 설정
    * ![img_49](https://user-images.githubusercontent.com/104918800/177148539-7e31d168-b7ff-4b93-a204-66362722d508.png)
  * 이미지 삽입
    * ![img_50](https://user-images.githubusercontent.com/104918800/177148540-2101837a-6792-4b69-9bd8-470b29f8bac4.png)
  * next로 끝내기 <br><br>

4 . GNS3 세팅하기 <br>
   * 드래그 앤 드롭 형식
     * ![img_52](https://user-images.githubusercontent.com/104918800/177148544-e3d00e2b-2e3d-490c-86f0-6085392a15a9.png)
   * cloud 1에 대해서 다음과 같이 configure한다
     * ![img_53](https://user-images.githubusercontent.com/104918800/177148547-9e9eab34-da59-4124-8021-338d5fa82f0f.png)
   * cloud 2에 대해서 다음과 같이 configure한다
     * ![img_54](https://user-images.githubusercontent.com/104918800/177148548-abc896dc-b2d1-433b-8695-b875289756f3.png)
   * cloud1에 케이블을 설치한다
     * ![img_55](https://user-images.githubusercontent.com/104918800/177148551-80ffee65-259f-4e0d-baf5-e8bc381d5b78.png)
   * cloud2에 케이블을 설치한다
     * ![img_56](https://user-images.githubusercontent.com/104918800/177148388-54617570-8ec1-4578-96ec-80164d0f83eb.png)
   * vmware에서 settings
     * ![img_57](https://user-images.githubusercontent.com/104918800/177148394-114df336-11d8-40b5-8d76-e925fff3302a.png)
   * 네트워크 설정 변경(VMnet1)
     * ![img_58](https://user-images.githubusercontent.com/104918800/177148395-1e1f9ee8-c2c0-4b57-aa35-07a6983a8b73.png)
     * 랜선을 빼서 다른 곳의 랜선으로 연결한 것과 같음
     * IP는 바뀔 것임
   * 리눅스 세팅에서 DHCP 할당으로 변경
     * ![img_59](https://user-images.githubusercontent.com/104918800/177148397-07264e76-aaeb-471b-9420-b4516d85b104.png)
     * 그리고 인터넷을 off/on을 하면 됨
     * 독립적이지만 사설 네트워트고, 인터넷과 연결되지 않은 네트워크에 연결 됨
     * ![img_60](https://user-images.githubusercontent.com/104918800/177148401-fcb853fe-f0dc-4e11-8801-1da0fbabb503.png)
   * 이제 포트포워딩을 진행해서 인터넷에 연결시킬 것이다 <br><br>


5 . GNU 사용하기 <br>
   * 라우터 CPU 최적화 진행해 보기
     * **여기서 라우터는 윈도우 안에서 돌아가는 가상의 라우터, 노트북과는 별개임**
     * CPU가 라우터를 최적화 하지 않아서 CPU 사용량이 엄청 많음
     * ![img_62](https://user-images.githubusercontent.com/104918800/177148408-b983c1d6-9ec9-48cd-9d33-a0353f43578f.png)
     * 저것을 누르면 최적화가 실행된다 - CPU 사용량이 확 줄음
   * RUN(실행)시킨 뒤, 콘솔창을 띄운다
     * ![img_61](https://user-images.githubusercontent.com/104918800/177148403-c2640e25-76ed-428b-b964-8565c915275b.png)
     * ![img_63](https://user-images.githubusercontent.com/104918800/177148410-b9ecf130-7f7e-4d2d-b94c-3695c57ae84f.png)
     * 마지막으로 no sh
     * 강사님 주소로 do ping을 진행하면 핑이 잘 전달된다
   * 디폴트 라우트를 설정한다
     * ip route 0.0.0.0 0.0.0.0 192.168.1.1
     * 인터넷에 있는 내가 모르는 모든 네트워크는 192.168.1.1(게이트웨이 즉 공유기)로 보내버리라
     * 구글로 do ping을 진행하면 잘 간다
     * ![img_65](https://user-images.githubusercontent.com/104918800/177148416-f2a56f78-4b97-407b-a60b-b8873f558f11.png) 여기서 ...!! 점은 arp table을 찾는 것임 <br><br>


7 . 보안상 취약한 텔넷 구성하고 연결을 해보자 <br>
   * 왜 SSH를 써야하는지 알게 될 것
   * 유저생성
     * username user1 password user1
   * 가상의 터미널을 21개 만들자(21개의 라우터 동시에 들어올 수 있게 함)
     * line vty 0 20
   * 계정을 통해 로그인할 수 있도록 한다
     * login local
     * enable password test123
   * telnet을 통해 서버에 접속을 해 보자
     * C:\Program Files\GNS3\putty.exe 실행
     * telnet 선택 후 강사님 IP (192.168.1.199) 엔터!
     * en 엔터
     * 우분투 비번 엔터
   * 로그인 성공함
     * ![img_66](https://user-images.githubusercontent.com/104918800/177148420-4863f4cc-d359-4aa8-bcb7-472651ffd660.png)
   * 중간에(강사님의 vm으로 가던 중, 강사님의 PC에서) wireshark를 통해 데이터를 볼 수 있다
     * 텔넷으로 접속할 경우 중간에서 누가 빼서 볼 수가 있다
     * 따라서 **http 및 telnet는 절대 쓰면 안된다** <br>

<br>
<hr>

## 오늘의 과제
* GOOGLE에 key-pair를 이용한 ssh 연결을 찾아 보자
* 이는 모든 클라우드 환경에서 사용된다 (패스워드를 이용하지 않음)
* SSH: 아주 중요함. 클라우드상 인스턴스로 접속할 때 아주 중요하다
